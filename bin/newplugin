#!/usr/bin/env ruby
#
#  Created on 2009-11-30.
#  Copyright (c) 2009. All rights reserved.
#  ZhangJinzhu <wosmvp@gmail.com>

require 'rubygems'
require File.expand_path(File.dirname(__FILE__) + "/../lib/newplugin")
require "newplugin/cli"
require 'rubigen'

if %w(-v --version).include? ARGV.first
  puts "#{File.basename($0)}: #{PluginTestTool::VERSION}"
  exit(0)
end

generate = ARGV[0]
# Newplugin.execute(STDOUT, ARGV)

require 'rubigen/scripts/generate'
source = RubiGen::PathSource.new(:application,File.join(File.dirname(__FILE__), "../generators"))
RubiGen::Base.reset_sources
RubiGen::Base.append_sources source
RubiGen::Scripts::Generate.new.run(ARGV[1..-1], :generator => generate)
